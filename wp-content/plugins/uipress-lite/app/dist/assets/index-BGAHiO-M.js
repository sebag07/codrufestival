import{F as A}from"./fonts-CcfgmNTE.js";import{a as D}from"../builder.build.DfBdCMNY.js";import{e as F,f as b,o as l,g as c,t as i,j as h,z as x,y as r,x as U,q as p,F as w,E as k,k as g,A as T,B as _,C as y,L as I}from"./index-COn-5JHg.js";const{__:o}=wp.i18n,L={components:{colourManager:D},props:{},data(){return{loading:!0,newUnitItem:{},ui:{mode:"light",search:"",strings:{theme:o("Theme"),add:o("Add"),variableLabel:o("Variable label"),variableName:o("Variable name"),deleteVariable:o("Delete variable"),custom:o("custom","uipress-lite"),revertStyle:o("Revert style back to default","uipress-lite"),searchVariables:o("Search variables...","uipress-lite"),new:o("New variable","uipress-lite"),editStyle:o("Edit style","uipress-lite"),colours:o("Colours","uipress-lite"),units:o("Units","uipress-lite"),fonts:o("Fonts","uipress-lite"),text:o("Text","uipress-lite"),newStyle:o("New style variable","uipress-lite"),newUnit:o("New unit variable","uipress-lite"),editUnit:o("Edit unit","uipress-lite"),styleName:o("Style name","uipress-lite"),value:o("Value","uipress-lite"),create:o("Create","uipress-lite"),editText:o("Edit text","uipress-lite"),newTextVariable:o("New text variable","uipress-lite")},tabs:{color:!1,units:!1,font:!1},fonts:A},newVariable:{label:"",var:"",type:"color"}}},watch:{"uipApp.data.themeStyles":{handler(){this.saveStyles()},deep:!0}},mounted(){this.getLocalFonts()},computed:{returnActiveMode(){if(!this.uipApp.data.userPrefs.darkTheme)return"value";if(this.uipApp.data.userPrefs.darkTheme)return"darkValue"},returnColorVars(){return Object.entries(this.uipApp.data.themeStyles).filter(([e,t])=>t.type==="color"||!("name"in t)).map(([e,t])=>(t.name=e,t.type="color",t))},returnUnitsVars(){return Object.values(this.uipApp.data.themeStyles).filter(e=>e.type==="units")},returnFontsVars(){return Object.values(this.uipApp.data.themeStyles).filter(e=>e.type==="font")}},methods:{async saveStyles(){let e=JSON.stringify(this.uipApp.data.themeStyles),t=new FormData;t.append("action","uip_save_user_styles"),t.append("security",uip_ajax.security),t.append("styles",e);const f=await this.sendServerRequest(uip_ajax.ajax_url,t);return f.error&&this.uipApp.notifications.notify(f.message,"uipress-lite","","error",!0),!0},async getLocalFonts(){await document.fonts.ready;const e=[...document.fonts].map(m=>m.family),f=[...new Set(e)].map(m=>({value:m.replace(/["']/g,""),label:m.replace(/["']/g,"").split(",")[0]}));this.ui.fonts=[...f,...this.ui.fonts]},splitUnitVal(e){let t=!1;if(this.ui.mode=="light"?t=e.value:t=e.darkValue,!t||t=="")return{units:"px",value:""};let f=t.replace(/\D/g,"");if(f=="")return{units:"px",value:""};let u=t.split(f)[1];return{value:f,units:u}},setUnitVal(e,t){e.value?t.value=e.value+e.units:t.value=""},clearVar(e){delete e.value,delete e.darkValue},deleteVar(e){delete this.uipApp.data.themeStyles[e.name],this.uipApp.notifications.notify(o("Variable deleted","uipress-lite"),"","success",!0)},customSet(e){return!!(this.ui.mode=="light"&&e.value&&e.value!=""||this.ui.mode=="dark"&&e.darkValue&&e.darkValue!="")},inSearch(e){if(this.ui.search=="")return!0;let t=this.ui.search.toLowerCase();return!!(e.name.toLowerCase().includes(t)||e.label.toLowerCase().includes(t))},cleanKeyName(e){return e=e.replace(" ","-"),e=e.replace(",",""),e=e.replace(".",""),e=e.replace(/[`~!@#$%^&*()|+\=?;:'",.<>\{\}\[\]\\\/]/gi,""),e=e.toLowerCase(),e=this.ensureDoubleDashPrefix(e),e},ensureDoubleDashPrefix(e){return e?e.startsWith("--")?e:e.startsWith("-")?"--"+e.slice(1):"--"+e:"--"},returnStyleBackground(e){const t=this.returnActiveMode;return e[t]?e[t].includes("--")?`var(${e[t]})`:e[t]:`var(${e.name})`},addNewColorVar(e){let t={name:"",type:"color",value:"",darkValue:"",user:!0};t={...t,...e},this.uipApp.data.themeStyles[t.name]=t,this.$refs.newcolourdrop.close()},addNewUnitVar(){let e={name:"",type:"units",value:"",darkValue:"",user:!0};e={...e,...this.newUnitItem},this.uipApp.data.themeStyles[e.name]=e,this.$refs.newunitdrop.close(),this.newUnitItem={}},addNewTextVar(){let e={name:"",type:"font",value:"",darkValue:"",user:!0};e={...e,...this.newUnitItem},this.uipApp.data.themeStyles[e.name]=e,this.$refs.newtextdrop.close(),this.newUnitItem={}},getCalculatedValue(e){if(e.value)return e.value;const t=getComputedStyle(document.documentElement),f=e.name.trim(),m=t.getPropertyValue(f).trim();if(m)return m}}},X={class:"uip-flex uip-flex-column uip-row-gap-s"},M={class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},j={class:"uip-text-emphasis uip-text-bold uip-text-s uip-flex-grow"},B={key:0,class:"uip-flex uip-flex-column uip-padding-left-xs"},E={class:"uip-flex uip-gap-xs uip-flex-center uip-gap-xxxs"},K={class:"uip-flex uip-gap-s uip-flex-center uip-padding-xxs uip-padding-left-xs uip-link-default uip-border-rounder hover:uip-background-muted"},P={class:"uip-w-16 uip-border-circle uip-ratio-1-1 uip-background-checkered"},R={class:"uip-text-s"},q={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-xs uip-w-240"},z={class:"uip-flex uip-flex-between uip-flex-center"},O={class:"uip-text-emphasis uip-text-bold uip-text-s"},J=["onClick"],W=["onClick","title"],G=["onClick","title"],H={class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},Q={class:"uip-text-emphasis uip-text-bold uip-text-s uip-flex-grow"},Y={key:1,class:"uip-flex uip-flex-column uip-padding-left-s uip-row-gap-xxs"},Z={class:"uip-flex uip-gap-xs uip-flex-center uip-gap-xxxs"},$={class:"uip-flex uip-gap-s uip-flex-center uip-padding-xxs uip-padding-left-xs uip-link-default uip-border-rounder hover:uip-background-muted"},ee={class:"uip-text-bold uip-text-s uip-w-40"},ie={class:"uip-text-s"},te={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-xs uip-w-240"},se={class:"uip-flex uip-flex-between uip-flex-center"},ue={class:"uip-text-emphasis uip-text-bold uip-text-s"},ne=["onClick"],le={class:"uip-grid-col-1-3 uip-padding-left-xs"},re={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},pe=["disabled","onInput","onUpdate:modelValue","placeholder"],oe={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},ae=["onClick","title"],de=["onClick","title"],ce={class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},xe={class:"uip-text-emphasis uip-text-bold uip-text-s uip-flex-grow"},fe={key:2,class:"uip-flex uip-flex-column uip-padding-left-s uip-row-gap-xxs"},me={class:"uip-flex uip-gap-xs uip-flex-center uip-gap-xxxs"},ge={class:"uip-flex uip-gap-s uip-flex-center uip-padding-xxs uip-padding-left-xs uip-link-default uip-border-rounder hover:uip-background-muted"},ve={class:"uip-text-bold uip-text-s uip-w-40 uip-overflow-hidden uip-text-ellipsis uip-no-wrap"},he={class:"uip-text-s"},_e={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-xs uip-w-240"},be={class:"uip-flex uip-flex-between uip-flex-center"},we={class:"uip-text-emphasis uip-text-bold uip-text-s"},ke=["onClick"],ye={class:"uip-grid-col-1-3 uip-padding-left-xs"},Ve={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},Ce=["disabled","onInput","onUpdate:modelValue","placeholder"],Ue={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},Se=["onUpdate:modelValue"],Ne=["value"],Ie=["onClick","title"],Ae=["onClick","title"],De={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-xs uip-w-280"},Fe={class:"uip-flex uip-flex-between uip-flex-center"},Te={class:"uip-text-emphasis uip-text-bold uip-text-s"},Le={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-s uip-w-280"},Xe={class:"uip-flex uip-flex-between uip-flex-center"},Me={class:"uip-text-emphasis uip-text-bold uip-text-s"},je={class:"uip-grid-col-1-3 uip-padding-left-xs"},Be={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},Ee=["placeholder"],Ke={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},Pe=["disabled"],Re={class:"uip-padding-s uip-flex uip-flex-column uip-row-gap-s uip-w-280"},qe={class:"uip-flex uip-flex-between uip-flex-center"},ze={class:"uip-text-emphasis uip-text-bold uip-text-s"},Oe={class:"uip-grid-col-1-3 uip-padding-left-xs"},Je={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},We=["placeholder"],Ge={class:"uip-text-muted uip-flex uip-flex-center uip-text-s uip-no-wrap"},He=["value"],Qe=["disabled"];function Ye(e,t,f,m,u,n){const a=b("AppIcon"),S=b("colourManager"),V=b("dropdown"),N=b("value-units"),C=b("contextmenu");return l(),c("div",X,[i("div",{class:"uip-flex uip-gap-xxs uip-flex-center uip-link-default",onClick:t[1]||(t[1]=s=>u.ui.tabs.color=!u.ui.tabs.color)},[i("div",M,[u.ui.tabs.color?x("",!0):(l(),h(a,{key:0,icon:"chevron_right",class:"uip-icon"})),u.ui.tabs.color?(l(),h(a,{key:1,icon:"expand_more",class:"uip-icon"})):x("",!0)]),i("div",j,r(u.ui.strings.colours),1),i("div",{onClick:t[0]||(t[0]=U(s=>e.$refs.newcolourdrop.show(s),["prevent","stop"])),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-default hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"add",class:"uip-icon"})])]),u.ui.tabs.color?(l(),c("div",B,[(l(!0),c(w,null,k(n.returnColorVars,(s,v)=>(l(),c("div",E,[p(V,{ref_for:!0,ref:"coloreditor-"+v,pos:"left center",snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],class:"uip-flex-grow"},{trigger:g(()=>[i("div",K,[i("div",P,[i("div",{class:"uip-w-16 uip-border-circle uip-ratio-1-1 uip-border",style:T({background:n.returnStyleBackground(s)})},null,4)]),i("div",R,r(s.name),1)])]),content:g(()=>[i("div",q,[i("div",z,[i("div",O,r(u.ui.strings.editStyle),1),i("div",{onClick:d=>e.$refs["coloreditor-"+v][0].close(),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})],8,J)]),p(S,{value:s,returnData:!1},null,8,["value"])])]),_:2},1536),!s.user&&n.customSet(s)?(l(),c("a",{key:0,onClick:d=>n.clearVar(s),title:u.ui.strings.revertStyle,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"format_color_reset"})],8,W)):x("",!0),s.user?(l(),c("a",{key:1,onClick:d=>n.deleteVar(s),title:u.ui.strings.deleteVariable,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"delete"})],8,G)):x("",!0)]))),256))])):x("",!0),i("div",{class:"uip-flex uip-gap-xxs uip-flex-center uip-link-default",onClick:t[3]||(t[3]=s=>u.ui.tabs.units=!u.ui.tabs.units)},[i("div",H,[u.ui.tabs.units?x("",!0):(l(),h(a,{key:0,icon:"chevron_right",class:"uip-icon"})),u.ui.tabs.units?(l(),h(a,{key:1,icon:"expand_more",class:"uip-icon"})):x("",!0)]),i("div",Q,r(u.ui.strings.units),1),i("div",{onClick:t[2]||(t[2]=U(s=>e.$refs.newunitdrop.show(s),["prevent","stop"])),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-default hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"add",class:"uip-icon"})])]),u.ui.tabs.units?(l(),c("div",Y,[(l(!0),c(w,null,k(n.returnUnitsVars,(s,v)=>(l(),c("div",Z,[p(V,{ref_for:!0,ref:"uniteditor-"+v,pos:"left center",snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],class:"uip-flex-grow"},{trigger:g(()=>[i("div",$,[i("div",ee,r(n.getCalculatedValue(s)),1),i("div",ie,r(s.name),1)])]),content:g(()=>[i("div",te,[i("div",se,[i("div",ue,r(u.ui.strings.editUnit),1),i("div",{onClick:d=>e.$refs["uniteditor-"+v][0].close(),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})],8,ne)]),i("div",le,[i("div",re,[i("span",null,r(u.ui.strings.styleName),1)]),_(i("input",{disabled:!s.user,onInput:d=>s.name=n.cleanKeyName(s.name),class:"uip-input uip-w-100p",type:"text","onUpdate:modelValue":d=>s.name=d,placeholder:u.ui.strings.styleName,autofocus:""},null,40,pe),[[y,s.name]]),i("div",oe,[i("span",null,r(u.ui.strings.value),1)]),p(N,{value:n.splitUnitVal(s),size:"xsmall",returnData:d=>{n.setUnitVal(d,s)},class:"uip-w-100p"},null,8,["value","returnData"])])])]),_:2},1536),!s.user&&n.customSet(s)?(l(),c("a",{key:0,onClick:d=>n.clearVar(s),title:u.ui.strings.revertStyle,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"format_color_reset"})],8,ae)):x("",!0),s.user?(l(),c("a",{key:1,onClick:d=>n.deleteVar(s),title:u.ui.strings.deleteVariable,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"delete"})],8,de)):x("",!0)]))),256))])):x("",!0),i("div",{class:"uip-flex uip-gap-xxs uip-flex-center uip-link-default",onClick:t[5]||(t[5]=s=>u.ui.tabs.font=!u.ui.tabs.font)},[i("div",ce,[u.ui.tabs.font?x("",!0):(l(),h(a,{key:0,icon:"chevron_right",class:"uip-icon"})),u.ui.tabs.font?(l(),h(a,{key:1,icon:"expand_more",class:"uip-icon"})):x("",!0)]),i("div",xe,r(u.ui.strings.text),1),i("div",{onClick:t[4]||(t[4]=U(s=>e.$refs.newtextdrop.show(s),["prevent","stop"])),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-default hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"add",class:"uip-icon"})])]),u.ui.tabs.font?(l(),c("div",fe,[(l(!0),c(w,null,k(n.returnFontsVars,(s,v)=>(l(),c("div",me,[p(V,{ref_for:!0,ref:"fonteditor-"+v,pos:"left center",snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],class:"uip-flex-grow"},{trigger:g(()=>[i("div",ge,[i("div",ve,r(n.getCalculatedValue(s)),1),i("div",he,r(s.name),1)])]),content:g(()=>[i("div",_e,[i("div",be,[i("div",we,r(u.ui.strings.editText),1),i("div",{onClick:d=>e.$refs["fonteditor-"+v][0].close(),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})],8,ke)]),i("div",ye,[i("div",Ve,[i("span",null,r(u.ui.strings.styleName),1)]),_(i("input",{disabled:!s.user,onInput:d=>s.name=n.cleanKeyName(s.name),class:"uip-input uip-w-100p",type:"text","onUpdate:modelValue":d=>s.name=d,placeholder:u.ui.strings.styleName,autofocus:""},null,40,Ce),[[y,s.name]]),i("div",Ue,[i("span",null,r(u.ui.strings.value),1)]),_(i("select",{class:"uip-input uip-w-100p","onUpdate:modelValue":d=>s.value=d},[(l(!0),c(w,null,k(u.ui.fonts,d=>(l(),c("option",{value:d.value},r(d.label),9,Ne))),256))],8,Se),[[I,s.value]])])])]),_:2},1536),!s.user&&n.customSet(s)?(l(),c("a",{key:0,onClick:d=>n.clearVar(s),title:u.ui.strings.revertStyle,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"format_color_reset"})],8,Ie)):x("",!0),s.user?(l(),c("a",{key:1,onClick:d=>n.deleteVar(s),title:u.ui.strings.deleteVariable,class:"uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-text-s"},[p(a,{icon:"delete"})],8,Ae)):x("",!0)]))),256))])):x("",!0),p(C,{ref:"newcolourdrop",snapRight:!0,snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],offsetX:-8},{default:g(()=>[i("div",De,[i("div",Fe,[i("div",Te,r(u.ui.strings.newStyle),1),i("div",{onClick:t[6]||(t[6]=s=>e.$refs.newcolourdrop.close()),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})])]),p(S,{value:{user:!0},returnData:s=>{n.addNewColorVar(s)}},null,8,["returnData"])])]),_:1},512),p(C,{ref:"newunitdrop",snapRight:!0,snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],offsetX:-8},{default:g(()=>[i("div",Le,[i("div",Xe,[i("div",Me,r(u.ui.strings.newUnit),1),i("div",{onClick:t[7]||(t[7]=s=>e.$refs.newunitdrop.close()),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})])]),i("div",je,[i("div",Be,[i("span",null,r(u.ui.strings.styleName),1)]),_(i("input",{onInput:t[8]||(t[8]=s=>u.newUnitItem.name=n.cleanKeyName(u.newUnitItem.name)),class:"uip-input uip-flex-grow uip-w-100p",type:"text","onUpdate:modelValue":t[9]||(t[9]=s=>u.newUnitItem.name=s),placeholder:u.ui.strings.styleName,autofocus:""},null,40,Ee),[[y,u.newUnitItem.name]]),i("div",Ke,[i("span",null,r(u.ui.strings.value),1)]),p(N,{value:n.splitUnitVal(u.newUnitItem),size:"xsmall",returnData:s=>{n.setUnitVal(s,u.newUnitItem)},class:"uip-w-100p"},null,8,["value","returnData"])]),i("button",{onClick:t[10]||(t[10]=(...s)=>n.addNewUnitVar&&n.addNewUnitVar(...s)),class:"uip-button-primary",disabled:!u.newUnitItem.name},r(u.ui.strings.create),9,Pe)])]),_:1},512),p(C,{ref:"newtextdrop",snapRight:!0,snapX:["#uip-block-settings","#uip-template-settings","#uip-global-settings"],offsetX:-8},{default:g(()=>[i("div",Re,[i("div",qe,[i("div",ze,r(u.ui.strings.newTextVariable),1),i("div",{onClick:t[11]||(t[11]=s=>e.$refs.newtextdrop.close()),class:"uip-flex uip-flex-center uip-flex-middle uip-padding-xxs uip-link-muted hover:uip-background-muted uip-border-rounder"},[p(a,{icon:"close",class:"uip-icon"})])]),i("div",Oe,[i("div",Je,[i("span",null,r(u.ui.strings.styleName),1)]),_(i("input",{onInput:t[12]||(t[12]=s=>u.newUnitItem.name=n.cleanKeyName(u.newUnitItem.name)),class:"uip-input uip-w-100p",type:"text","onUpdate:modelValue":t[13]||(t[13]=s=>u.newUnitItem.name=s),placeholder:u.ui.strings.styleName,autofocus:""},null,40,We),[[y,u.newUnitItem.name]]),i("div",Ge,[i("span",null,r(u.ui.strings.value),1)]),_(i("select",{class:"uip-input uip-w-100p","onUpdate:modelValue":t[14]||(t[14]=s=>u.newUnitItem.value=s)},[(l(!0),c(w,null,k(u.ui.fonts,s=>(l(),c("option",{value:s.value},r(s.label),9,He))),256))],512),[[I,u.newUnitItem.value]])]),i("button",{onClick:t[15]||(t[15]=(...s)=>n.addNewTextVar&&n.addNewTextVar(...s)),class:"uip-button-primary",disabled:!u.newUnitItem.name},r(u.ui.strings.create),9,Qe)])]),_:1},512)])}const ii=F(L,[["render",Ye]]);export{ii as g};
//# sourceMappingURL=index-BGAHiO-M.js.map
