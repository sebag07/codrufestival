import{e as O,g as u,t,y as p,z as f,q as c,B as l,C as m,a8 as d,f as h,o as r}from"./index-COn-5JHg.js";import{_ as b}from"./index-BlvaEJug.js";const{__:e}=wp.i18n,k={components:{Tabs:b},props:{args:Object,triggerClass:String},data(){return{modelOpen:!0,themeLoading:!1,themes:[],saving:!1,finished:!1,importPath:"",fetchingSettings:!0,strings:{siteSync:e("Site sync","uipress-lite"),hostExplanation:e("Enabling this site as a host allows you to sync other sites to this site's uiPress settings.","uipress-lite"),pathExplanation:e("This is the path to the current sites sync endpoint","uipress-lite"),keyExplanation:e("This is the key used to securely sync between sites","uipress-lite"),settingsExplanation:e("Choose the sections you want to sync with a remote site. Enabling auto update will allow uiPress to routinely check for changes at the host site and sync updates.","uipress-lite"),syncExplanation:e("Choose what areas of uiPress you want to keep in sync","uipress-lite"),syncEndpointExplanation:e("This is the endpoint url to the site you want to sync with","uipress-lite"),autoUpdateExplanation:e("If enabled, uipress will periodically check for updates and keep this site in sync","uipress-lite"),templates:e("Templates","uipress-lite"),siteSettings:e("Site settings","uipress-lite"),themeStyles:e("Theme styles","uipress-lite"),adminMenus:e("Admin menus","uipress-lite"),cancel:e("Cancel","uipress-lite"),export:e("Export","uipress-lite"),hostEnabled:e("Host enabled","uipress-lite"),importPath:e("Import URL","uipress-lite"),importKey:e("Import key","uipress-lite"),save:e("Save","uipress-lite"),refreshKey:e("Refresh key","uipress-lite"),syncOptions:e("Sync options","uipress-lite"),autoUpdate:e("Auto update","uipress-lite"),syncNow:e("Sync now","uipress-lite")},hostOptions:{hostEnabled:!1,key:""},syncOptions:{importOptions:{templates:!0,siteSettings:!0,themeStyles:!0,adminMenus:!0},key:"",path:"",keepUpToDate:!1},activeTab:"host",switchOptions:{host:{value:"host",label:e("Host","uipress-lite")},sync:{value:"sync",label:e("Sync","uipress-lite")}}}},watch:{currentStep:{handler(o,s){o==2&&this.fetchThemes()}}},created(){this.getSyncOptions()},computed:{isDisabledButton(){if(!this.syncOptions.importOptions.templates&&!this.syncOptions.importOptions.siteSettings&&!this.syncOptions.importOptions.themeStyles&&!this.syncOptions.importOptions.adminMenus)return!0}},methods:{async getSyncOptions(){let o=new FormData;o.append("action","uip_get_sync_options"),o.append("security",uip_ajax.security);const s=await this.sendServerRequest(uip_ajax.ajax_url,o);if(this.fetchingSettings=!1,s.error){this.uipApp.notifications.notify(s.message,"","error",!0);return}this.importPath=s.restURL,s.options&&("key"in s.options&&(this.hostOptions.key=s.options.key),"hostEnabled"in s.options&&(this.hostOptions.hostEnabled=s.options.hostEnabled),"syncOptions"in s.options&&("importOptions"in s.options.syncOptions&&(this.syncOptions.importOptions={...this.syncOptions.importOptions,...s.options.syncOptions.importOptions}),"key"in s.options.syncOptions&&(this.syncOptions.key=s.options.syncOptions.key),"keepUpToDate"in s.options.syncOptions&&(this.syncOptions.keepUpToDate=s.options.syncOptions.keepUpToDate),"path"in s.options.syncOptions&&(this.syncOptions.path=s.options.syncOptions.path)))},async refreshKey(){let o=new FormData;o.append("action","uip_refresh_sync_key"),o.append("security",uip_ajax.security);const s=await this.sendServerRequest(uip_ajax.ajax_url,o);if(this.fetchingSettings=!1,s.error){this.uipApp.notifications.notify(s.message,"","error",!0);return}s.options&&"key"in s.options&&(this.hostOptions.key=s.options.key)},async saveHostSettings(){let o=new FormData;o.append("action","uip_save_sync_options"),o.append("security",uip_ajax.security),o.append("options",this.prepareJSON(this.hostOptions)),o.append("syncOptions",this.prepareJSON(this.syncOptions));const s=await this.sendServerRequest(uip_ajax.ajax_url,o);if(this.fetchingSettings=!1,s.error){this.uipApp.notifications.notify(s.message,"","error",!0);return}this.uipApp.notifications.notify(e("Settings saved","uipress-lite"),"","success")},async syncNow(){let o=new FormData;o.append("action","uip_start_site_sync"),o.append("security",uip_ajax.security),o.append("options",JSON.stringify(this.syncOptions));const s=this.uipApp.notifications.notify(e("Importing uiPress content","uipress-lite"),"","default",!1,!0),y=await this.sendServerRequest(uip_ajax.ajax_url,o);if(this.uipApp.notifications.remove(s),y.error){this.uipApp.notifications.notify(y.message,"","error",!0);return}this.uipApp.notifications.notify(e("Import complete","uipress-lite"),"","success"),this.$router.push("/"),setTimeout(function(){location.reload()},600)}}},w={class:"uip-flex uip-flex-column uip-row-gap-s uip-padding-top-s uip-w-100p"},S={class:"uip-flex uip-flex-between uip-gap-xs uip-flex-center"},E={class:"uip-text-l uip-text-emphasis"},T={key:1,class:"uip-flex uip-gap-xs"},D=["disabled"],U={key:0,class:"uip-padding-l uip-flex uip-flex-center uip-flex-middle"},V={key:1,class:"uip-grid-col-4-6 uip-padding-left-xs",style:{"grid-gap":"var(--uip-margin-m)"}},j={class:"uip-flex uip-flex-column uip-gap-xxs"},A={class:"uip-text-emphasis"},C={class:"uip-text-muted"},N={class:"uip-flex uip-gap-xs uip-flex-no-wrap uip-flex-center"},P={class:"uip-flex uip-flex-column uip-gap-xxs"},I={class:"uip-text-emphasis"},M={class:"uip-text-muted"},K={class:"uip-flex uip-gap-xs uip-flex-no-wrap uip-flex-center"},R=["value"],B={class:"uip-flex uip-flex-column uip-gap-xxs"},q={class:"uip-text-emphasis"},H={class:"uip-text-muted"},F={class:"uip-flex uip-gap-xxs uip-flex-no-wrap uip-flex-center"},J=["title"],L={key:2,class:"uip-grid-col-4-6 uip-padding-left-xs",style:{"grid-gap":"var(--uip-margin-m)"}},z={class:"uip-flex uip-flex-column uip-gap-xxs"},G={class:"uip-text-emphasis"},Q={class:"uip-text-muted"},W={class:"uip-flex uip-gap-xs uip-flex-no-wrap uip-flex-center"},X={class:"uip-flex uip-flex-column uip-gap-xxs"},Y={class:"uip-text-emphasis"},Z={class:"uip-text-muted"},$={class:"uip-flex uip-gap-xxs uip-flex-no-wrap uip-flex-center"},ss={class:"uip-flex uip-flex-column uip-gap-xxs"},ts={class:"uip-text-emphasis"},is={class:"uip-text-muted"},es={class:"uip-flex uip-flex-column uip-row-gap-xs"},ns={class:"uip-flex uip-gap-xs uip-flex-center"},ps={class:""},os={class:"uip-flex uip-gap-xs uip-flex-center"},ls={class:""},us={class:"uip-flex uip-gap-xs uip-flex-center"},rs={class:""},as={class:"uip-flex uip-gap-xs uip-flex-center"},cs={class:""},ds={class:"uip-flex uip-flex-column uip-gap-xxs"},hs={class:"uip-text-emphasis"},ys={class:"uip-text-muted"},ms={class:"uip-flex uip-gap-xs uip-flex-no-wrap uip-flex-center"};function xs(o,s,y,fs,i,a){const g=h("Tabs"),_=h("loading-chart"),x=h("switch-select"),v=h("AppIcon");return r(),u("div",w,[t("div",S,[t("div",E,p(i.strings.siteSync),1),i.activeTab=="host"?(r(),u("button",{key:0,onClick:s[0]||(s[0]=n=>a.saveHostSettings()),class:"uip-button-primary"},p(i.strings.save),1)):f("",!0),i.activeTab!="host"?(r(),u("div",T,[t("button",{onClick:s[1]||(s[1]=n=>a.syncNow()),class:"uip-button-secondary"},p(i.strings.syncNow),1),t("button",{onClick:s[2]||(s[2]=n=>a.saveHostSettings()),class:"uip-button-primary",disabled:a.isDisabledButton},p(i.strings.save),9,D)])):f("",!0)]),c(g,{options:i.switchOptions,modelValue:i.activeTab,"onUpdate:modelValue":s[3]||(s[3]=n=>i.activeTab=n),class:"uip-margin-bottom-s"},null,8,["options","modelValue"]),i.fetchingSettings?(r(),u("div",U,[c(_)])):i.activeTab=="host"?(r(),u("div",V,[t("div",j,[t("span",A,p(i.strings.hostEnabled),1),t("div",C,p(i.strings.hostExplanation),1)]),t("div",N,[c(x,{args:{asText:!0},value:i.hostOptions.hostEnabled,returnData:function(n){i.hostOptions.hostEnabled=n}},null,8,["value","returnData"])]),s[12]||(s[12]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1)),t("div",P,[t("span",I,p(i.strings.importPath),1),t("div",M,p(i.strings.pathExplanation),1)]),t("div",K,[t("input",{value:i.importPath,class:"uip-input-small uip-w-100p",disabled:"",type:"text"},null,8,R)]),s[13]||(s[13]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1)),t("div",B,[t("span",q,p(i.strings.importKey),1),t("div",H,p(i.strings.keyExplanation),1)]),t("div",F,[l(t("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>i.hostOptions.key=n),disabled:"",class:"uip-input-small uip-w-100p",type:"text"},null,512),[[m,i.hostOptions.key]]),t("button",{onClick:s[5]||(s[5]=n=>a.refreshKey()),title:i.strings.refreshKey,class:"uip-button-default uip-border-rounder uip-icon uip-padding-xxs uip-link-muted uip-margin-left-xs"},[c(v,{icon:"refresh"})],8,J)]),s[14]||(s[14]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1))])):(r(),u("div",L,[t("div",z,[t("span",G,p(i.strings.importPath),1),t("div",Q,p(i.strings.syncEndpointExplanation),1)]),t("div",W,[l(t("input",{"onUpdate:modelValue":s[6]||(s[6]=n=>i.syncOptions.path=n),class:"uip-input-small uip-w-100p",type:"text"},null,512),[[m,i.syncOptions.path]])]),s[15]||(s[15]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1)),t("div",X,[t("span",Y,p(i.strings.importKey),1),t("div",Z,p(i.strings.keyExplanation),1)]),t("div",$,[l(t("input",{"onUpdate:modelValue":s[7]||(s[7]=n=>i.syncOptions.key=n),class:"uip-input-small uip-w-100p",type:"password"},null,512),[[m,i.syncOptions.key]])]),s[16]||(s[16]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1)),t("div",ss,[t("span",ts,p(i.strings.syncOptions),1),t("div",is,p(i.strings.syncExplanation),1)]),t("div",es,[t("label",ns,[l(t("input",{class:"uip-user-check uip-checkbox uip-margin-remove","onUpdate:modelValue":s[8]||(s[8]=n=>i.syncOptions.importOptions.templates=n),type:"checkbox"},null,512),[[d,i.syncOptions.importOptions.templates]]),t("div",ps,p(i.strings.templates),1)]),t("label",os,[l(t("input",{class:"uip-user-check uip-checkbox uip-margin-remove","onUpdate:modelValue":s[9]||(s[9]=n=>i.syncOptions.importOptions.siteSettings=n),type:"checkbox"},null,512),[[d,i.syncOptions.importOptions.siteSettings]]),t("div",ls,p(i.strings.siteSettings),1)]),t("label",us,[l(t("input",{class:"uip-user-check uip-checkbox uip-margin-remove","onUpdate:modelValue":s[10]||(s[10]=n=>i.syncOptions.importOptions.themeStyles=n),type:"checkbox"},null,512),[[d,i.syncOptions.importOptions.themeStyles]]),t("div",rs,p(i.strings.themeStyles),1)]),t("label",as,[l(t("input",{class:"uip-user-check uip-checkbox uip-margin-remove","onUpdate:modelValue":s[11]||(s[11]=n=>i.syncOptions.importOptions.adminMenus=n),type:"checkbox"},null,512),[[d,i.syncOptions.importOptions.adminMenus]]),t("div",cs,p(i.strings.adminMenus),1)])]),s[17]||(s[17]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1)),t("div",ds,[t("span",hs,p(i.strings.autoUpdate),1),t("div",ys,p(i.strings.autoUpdateExplanation),1)]),t("div",ms,[c(x,{args:{asText:!0},value:i.syncOptions.keepUpToDate,returnData:function(n){i.syncOptions.keepUpToDate=n}},null,8,["value","returnData"])]),s[18]||(s[18]=t("div",{class:"uip-border-top",style:{"grid-column":"span 2 / span 2"}},null,-1))]))])}const vs=O(k,[["render",xs]]);export{vs as default};
//# sourceMappingURL=index-BHfGwPer.js.map
