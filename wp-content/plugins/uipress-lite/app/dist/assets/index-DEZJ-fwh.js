import{b as l,c as F,g as x,q as c,k as p,F as w,a4 as g,f as b,o as d,t as s,y as u,u as v,D as L,x as U,E as W,j as G,a5 as H,a6 as J}from"./index-COn-5JHg.js";import{u as K}from"../builder.build.DfBdCMNY.js";import{_ as O}from"./index-DvmIT408.js";/* empty css              */const Q={class:"uip-flex uip-flex-column uip-gap-s uip-padding-l uip-flex-center"},X={class:"uip-text-bold uip-text-xl uip-text-emphasis"},Y={class:"uip-text-muted"},Z={class:"inline-flex uip-text-emphasis"},ee={class:"uip-inline-flex uip-text-s uip-padding-left-xxs uip-padding-right-xxs uip-border uip-border-round uip-background-muted uip-text-normal"},te={class:"inline-flex uip-text-muted"},ie={class:"inline-flex uip-text-muted"},ae={class:"uip-padding-xs uip-flex uip-flex-column uip-text-weight-normal"},ne={key:0,class:"uip-border-top uip-margin-top-xs uip-margin-bottom-xs"},se={class:""},ue=["onClick"],oe={class:""},me={__name:"index",setup(pe){const{__:n}=wp.i18n,k=l([]),y=l(!0),C=l(null),D=K(),_=l(null),m=l(null),{appContext:j}=J(),o=l({search:"",per_page:30,page:1,total:0,pages:0,status:"any",context:"edit"}),M=l([{key:"name",label:n("Name","uipress-lite")},{key:"status",label:n("Status","uipress-lite")},{key:"type",label:n("Type","uipress-lite")},{key:"modified",label:n("Modified","uipress-lite")},{key:"actions",width:"30px"}]),P=F(()=>[{name:n("Edit","uipress-lite"),icon:"edit",type:"link",url:`/uibuilder/${m.value}`},{name:n("Duplicate","uipress-lite"),icon:"content_copy",type:"action",action:()=>S(m.value)},{type:"divider"},{name:n("Delete","uipress-lite"),icon:"delete",type:"action",action:()=>z(m.value),danger:!0}]),f=async a=>{a||(y.value=!0);let e=new FormData;e.append("action","uip_get_ui_templates"),e.append("security",uip_ajax.security),e.append("page",o.value.page),e.append("search",o.value.search),e.append("filter","all");const t=await g(uip_ajax.ajax_url,e);y.value=!1,t&&(k.value=t.templates)},$=()=>{o.value.page>1&&(o.value.page--,f(!0))},R=()=>{o.value.page<o.value.pages&&(o.value.page++,f(!0))},A=(a,e)=>{const t=h.value[e];t&&D.push(`/uibuilder/${t.id}`)},B=a=>a=="publish"?n("Published","uipress-lite"):n("Draft","uipress-lite"),h=F(()=>{const a=o.value.search.toLowerCase();return k.value.filter(e=>e.name.toLowerCase().includes(a))}),I=(a,e)=>{const t=h.value[e];t&&(m.value=t.id,_.value.show(a))},S=async a=>{const{uipApp:e}=j.config.globalProperties;let t=new FormData;t.append("action","uip_duplicate_ui_template"),t.append("security",uip_ajax.security),t.append("id",a);const r=await g(uip_ajax.ajax_url,t);if(r.error){e.notifications.notify(r.message,"","error",!0);return}e.notifications.notify(n("Template duplicated","uipress-lite"),"","success",!0),f(!0)},z=async a=>{await C.value.show({title:n("Delete template","uipress-lite"),message:n("Deleted templates can't be recovered","uipress-lite"),okButton:n("Delete","uipress-lite")})&&E(a)},E=async a=>{const{uipApp:e}=j.config.globalProperties;let t=new FormData;t.append("action","uip_delete_ui_template"),t.append("security",uip_ajax.security),t.append("templateids",a);const r=await g(uip_ajax.ajax_url,t);if(r.error){e.notifications.notify(r.message,"","error",!0);return}e.notifications.notify(r.message,"","success",!0),f(!0)},N=async a=>{let e=new FormData;e.append("action","uip_create_new_ui_template"),e.append("security",uip_ajax.security),e.append("templateType",a);const t=await g(uip_ajax.ajax_url,e);t&&D.push(`/uibuilder/${t.id}/`)},q=a=>{a.action(),_.value.close()};return window.parent&&window.parent.postMessage({eventName:"uip_exit_fullscreen"},"*"),f(),(a,e)=>{const t=b("AppIcon"),r=b("RouterLink"),V=b("contextmenu");return d(),x(w,null,[c(O,{pagination:o.value,columns:M.value,data:h.value,fetching:y.value,onPrevious:$,onNext:R,rowClick:A,rowRightClick:I,hideSelect:!0},{"right-actions":p(()=>[s("button",{class:"uip-button-primary uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-text-s",onClick:e[0]||(e[0]=i=>N("ui-template"))},u(v(n)("New template","uipress-lite")),1)]),empty:p(()=>[s("div",Q,[c(t,{icon:"folder_open",style:{"font-size":"60px"}}),s("div",X,u(v(n)("No templates yet","uipress-lite")),1),s("div",Y,u(v(n)("When you create new templates they will show up here.","uipress-lite")),1),s("button",{class:"uip-button-primary uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-text-s",onClick:e[1]||(e[1]=i=>N("ui-template"))},u(v(n)("New template","uipress-lite")),1)])]),"row-name":p(({row:i})=>[s("div",Z,u(i.name),1)]),"row-status":p(({row:i})=>[s("div",{class:L(["uip-inline-flex uip-text-s uip-padding-left-xxs uip-padding-right-xxs uip-border uip-border-round",i.status==="publish"?"uip-border-green uip-text-green":"uip-border-orange uip-text-orange"])},u(B(i.status)),3)]),"row-type":p(({row:i})=>[s("div",ee,u(i.type),1)]),"row-modified":p(({row:i})=>[s("div",te,u(i.modified),1)]),"row-actions":p(({row:i})=>[s("div",ie,[c(t,{icon:"more_horiz",onClick:U(T=>{m.value=i.id,_.value.show(T)},["stop","prevent"])},null,8,["onClick"])])]),_:1},8,["pagination","columns","data","fetching"]),c(V,{ref_key:"templateContextMenu",ref:_},{default:p(()=>[s("div",ae,[(d(!0),x(w,null,W(P.value,i=>(d(),x(w,null,[i.type=="divider"?(d(),x("div",ne)):i.type=="link"?(d(),G(r,{key:1,to:i.url,class:"uip-link-muted uip-flex uip-flex-center uip-flex-between uip-gap-m uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-no-underline"},{default:p(()=>[s("span",se,u(i.name),1),c(t,{icon:i.icon,class:"uip-icon"},null,8,["icon"])]),_:2},1032,["to"])):(d(),x("a",{key:2,onClick:T=>q(i),class:L(["uip-flex uip-flex-center uip-flex-between uip-gap-m uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-no-underline",i.danger?"uip-link-danger":"uip-link-muted"])},[s("span",oe,u(i.name),1),c(t,{icon:i.icon,class:"uip-icon"},null,8,["icon"])],10,ue))],64))),256))])]),_:1},512),c(H,{ref_key:"confirmModal",ref:C},null,512)],64)}}};export{me as default};
//# sourceMappingURL=index-DEZJ-fwh.js.map
