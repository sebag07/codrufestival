{"version":3,"file":"index-DvmIT408.js","sources":["../../src/components/table/index.vue"],"sourcesContent":["<script setup>\n// Import from vue\nimport { ref, computed, defineExpose, defineEmits, watch } from \"vue\";\nconst { __ } = wp.i18n;\n\n// Import comps\nimport TableLoader from \"@/components/table-loader/index.vue\";\n\n// Define emits\nconst emit = defineEmits([\"previous\", \"next\", \"search\", \"selected\", \"griddragenter\", \"griddragover\", \"griddragleave\", \"griddrop\"]);\n\n// Define props and data\nconst props = defineProps({\n  columns: { default: () => [], type: Array },\n  data: { default: () => [], type: Array },\n  rowRightClick: { type: Function },\n  rowClick: { type: Function },\n  pagination: { type: Object },\n  fetching: { type: Boolean },\n  defaultMode: { default: () => \"list\", type: String },\n  onlyMode: { type: String },\n  hideSelect: { type: Boolean },\n  hasBorders: { type: Boolean },\n});\n\n// Set mode\nconst mode = ref(props.defaultMode);\n\n// Selected\nconst selected = ref([]);\n\n// Watch for changes to selected\nwatch(\n  selected,\n  (newValue, oldValue) => {\n    emit(\"selected\", newValue);\n  },\n  { deep: true }\n);\n\nconst returnTdClass = (data, index) => {\n  let classes = props.hideSelect && index === 0 ? [\"uip-border-round-left\"] : [];\n  if (index == props.columns.length - 1) {\n    classes.push(\"uip-border-round-right\");\n  }\n\n  if (props.hasBorders) {\n    classes = [\"uip-border-bottom\", \"\"];\n  }\n\n  return classes.join(\" \");\n};\n\nconst toggleAllSelection = (evt) => {\n  const value = evt.target.checked;\n  if (value) {\n    props.data.forEach((item) => {\n      selected.value.push(item.id);\n    });\n  } else {\n    selected.value = [];\n  }\n};\n\nconst toggleSelected = (value, post) => {\n  const alreadySelected = selected.value.findIndex((item) => item.id === post.id);\n\n  // Selected\n  if (value && !selected.value.includes(post.id)) {\n    selected.value.push(post.id);\n  }\n\n  // Deselected\n  if (!value && selected.value.includes(post.id)) {\n    selected.value.splice(alreadySelected, 1);\n  }\n};\n\n/**\n * Returns delay for row\n */\nconst returnTransitionDelay = (index) => {\n  let time = index / 30;\n  time = time > 0.6 ? 0.6 : time;\n  return `${time.toFixed(3)}s`;\n};\n\n/**\n * Handles right clicks on rows\n */\nconst handleRightClick = (evt, index) => {\n  if (!props.rowRightClick) return;\n  evt.preventDefault();\n  props.rowRightClick(evt, index);\n};\n\n/**\n * Handles right clicks on rows\n */\nconst handleClick = (evt, index) => {\n  if (!props.rowClick) return;\n  evt.preventDefault();\n  props.rowClick(evt, index);\n};\n\n/**\n * Returns col width when set\n */\nconst returnColumnWidth = (col) => {\n  if (!col.width) return;\n  return `width:${col.width}`;\n};\n\n/**\n * Returns current mode\n */\nconst returnMode = computed(() => {\n  return mode.value;\n});\n\n// Expose method\ndefineExpose({\n  returnMode,\n});\n</script>\n\n<template>\n  <div class=\"uip-flex uip-flex-column uip-gap-m uip-w-100p\">\n    <div class=\"uip-flex uip-flex-row gauip-padding-xs uip-flex-center uip-w-100p\">\n      <!-- \n\t  * Search \n\t  *\n\t  * Main search input for data\n\t  -->\n      <div class=\"uip-flex-grow\">\n        <div class=\"uip-position-relative uip-w-100p\" style=\"max-width: 400px\">\n          <AppIcon icon=\"search\" class=\"uip-text-muted uip-position-absolute uip-text-l uip-top-50p uip-translateY--50p\" style=\"left: 8px\"></AppIcon>\n          <input\n            v-model=\"pagination.search\"\n            @keyup.enter=\"emit('search')\"\n            type=\"text\"\n            class=\"uip-input\"\n            style=\"background: transparent; padding-left: 36px; padding-right: 36px; width: 100%; border: none\"\n            :placeholder=\"__('Search...', 'uipress-lite')\"\n          />\n          <Transition>\n            <AppIcon v-if=\"pagination.search\" icon=\"return\" class=\"uip-text-muted uip-position-absolute uip-text-l uip-top-50p uip-translateY--50p\" style=\"right: 8px\" />\n          </Transition>\n        </div>\n      </div>\n\n      <!-- \n\t  * Right actions \n\t  *\n\t  * Provides the slot for extra filters etc\n\t  -->\n      <div class=\"uip-flex uip-gap-xs uip-flex-center\">\n        <slot name=\"right-actions\"></slot>\n      </div>\n    </div>\n\n    <!-- \n\t * Table section\n\t *\n\t * Handler for data when in table mode\n\t -->\n    <table v-if=\"mode === 'list' && (!onlyMode || onlyMode === 'list')\" class=\"uip-w-100p uip-border-collapse uip-text-m\">\n      <thead>\n        <tr class=\"uip-text-left\">\n          <th v-if=\"!hideSelect\" class=\"uip-text-muted w-1 uip-padding-s uip-border-top uip-border-bottom uip-w-30\">\n            <input type=\"checkbox\" class=\"uip-checkbox\" @click=\"toggleAllSelection\" />\n          </th>\n          <th v-for=\"(column, index) in columns\" :key=\"column.key\" class=\"uip-text-muted uip-padding-s uip-border-top uip-border-bottom uip-text-weight-normal\" :style=\"returnColumnWidth(column)\">\n            <!-- Use scoped slot for custom cell rendering -->\n            <slot :name=\"'head-' + column.key\" :column=\"column\">\n              {{ column.label }}\n            </slot>\n          </th>\n        </tr>\n      </thead>\n\n      <!-- \n\t   * Table body\n\t   *\n\t   * Handles table body data\n\t   -->\n      <tbody v-if=\"fetching\">\n        <tr v-if=\"!hasBorders\">\n          <td :colspan=\"columns.length\"><div class=\"uip-h-10\"></div></td>\n        </tr>\n        <TableLoader :columns=\"columns.length\" :rows=\"10\" />\n      </tbody>\n      <TransitionGroup tag=\"tbody\" name=\"tableitem\" v-else :css=\"false\">\n        <!-- \n\t\t* Empty data\n\t\t*\n\t\t* Provides slot for empty data\n\t\t-->\n        <tr v-if=\"!data.length && !pagination.search.length && !fetching\" key=\"emptydata\">\n          <td :colspan=\"columns.length\"><slot name=\"empty\"></slot></td>\n        </tr>\n        <!-- \n\t\t* Empty query data\n\t\t*\n\t\t* Shows nothing found message for when there is a search term\n\t\t-->\n        <tr v-if=\"!data.length && pagination.search.length && !fetching\" key=\"emptyquery\">\n          <td :colspan=\"columns.length\">\n            <EmptyTable title=\"Nothing found\" :description=\"`Nothing found for search term: '${pagination.search}'`\" />\n          </td>\n        </tr>\n\n        <!-- \n\t\t* Spacer\n\t\t*\n\t\t* Provides empty space\n\t\t-->\n        <tr v-if=\"!hasBorders\">\n          <td :colspan=\"columns.length\"><div class=\"uip-h-10\"></div></td>\n        </tr>\n\n        <!-- \n\t\t* Loop\n\t\t*\n\t\t* Main data loop for table body\n\t\t-->\n        <tr\n          v-for=\"(row, index) in data\"\n          :key=\"row.id ? row.id : index\"\n          :style=\"`transition-delay:${returnTransitionDelay(index)}`\"\n          @contextmenu=\"handleRightClick($event, index)\"\n          @click=\"handleClick($event, index)\"\n          class=\"uip-row-hover\"\n        >\n          <td\n            v-if=\"!hideSelect\"\n            class=\"uip-padding-left-s uip-padding-right-s uip-padding-top-xs uip-padding-bottom-xs group-hover:bg-slate-50 transition-all uip-cursor-pointer uip-border-round-left uip-w-30\"\n          >\n            <input type=\"checkbox\" class=\"uip-checkbox\" :checked=\"selected.includes(row.id) ? true : false\" @change=\"toggleSelected(d, row)\" />\n          </td>\n          <td\n            class=\"uip-padding-left-s uip-padding-right-s uip-padding-top-xs uip-padding-bottom-xs group-hover:bg-slate-50 transition-all uip-cursor-pointer\"\n            v-for=\"(column, colindex) in columns\"\n            :key=\"column.key\"\n            :class=\"returnTdClass(column, colindex)\"\n          >\n            <!-- Use scoped slot for custom cell rendering -->\n            <slot :name=\"'row-' + column.key\" :row=\"row\" :index=\"index\" />\n          </td>\n        </tr>\n      </TransitionGroup>\n\n      <!-- \n\t  * Main pagination\n\t  *\n\t  * Pagination for tables with more than one page\n\t  -->\n      <tfoot>\n        <tr>\n          <td :colspan=\"columns.length + 1\">\n            <div v-if=\"pagination && data.length && pagination.pages > 1\" class=\"uip-padding-top-s uip-flex uip-flex-row uip-gap-m uip-flex-between uip-flex-center uip-padding-xs uip-w-100p\">\n              <span class=\"uip-text-muted\">{{ pagination.per_page }} of {{ pagination.total }}</span>\n              <div class=\"uip-flex uip-gap-s uip-flex-center\">\n                <span class=\"uip-text-muted\">{{ pagination.page }} of {{ pagination.pages }}</span>\n                <button :disabled=\"pagination.page === 1\" @click=\"emit('previous')\" class=\"uip-button-default\">\n                  <AppIcon icon=\"chevron_left\" />\n                </button>\n                <button @click=\"emit('next')\" :disabled=\"pagination.page === pagination.pages\" class=\"uip-button-default\">\n                  <AppIcon icon=\"chevron_right\" />\n                </button>\n              </div>\n            </div>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n</template>\n\n<style>\n.tableitem-move,\n.tableitem-enter-active,\n.tableitem-leave-active {\n  transition: all 0.5s ease;\n}\n.tableitem-enter-from,\n.tableitem-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n"],"names":["__","emit","__emit","props","__props","mode","ref","selected","watch","newValue","oldValue","returnTdClass","data","index","classes","toggleAllSelection","evt","item","toggleSelected","value","post","alreadySelected","returnTransitionDelay","time","handleRightClick","handleClick","returnColumnWidth","col","returnMode","computed","__expose"],"mappings":"4oEAGA,KAAM,CAAE,GAAAA,CAAE,EAAK,GAAG,KAMZC,EAAOC,EAGPC,EAAQC,EAcRC,EAAOC,EAAIH,EAAM,WAAW,EAG5BI,EAAWD,EAAI,EAAE,EAGvBE,EACED,EACA,CAACE,EAAUC,IAAa,CACtBT,EAAK,WAAYQ,CAAQ,CAC1B,EACD,CAAE,KAAM,EAAI,CACd,EAEA,MAAME,EAAgB,CAACC,EAAMC,IAAU,CACrC,IAAIC,EAAUX,EAAM,YAAcU,IAAU,EAAI,CAAC,uBAAuB,EAAI,CAAE,EAC9E,OAAIA,GAASV,EAAM,QAAQ,OAAS,GAClCW,EAAQ,KAAK,wBAAwB,EAGnCX,EAAM,aACRW,EAAU,CAAC,oBAAqB,EAAE,GAG7BA,EAAQ,KAAK,GAAG,CACzB,EAEMC,EAAsBC,GAAQ,CACpBA,EAAI,OAAO,QAEvBb,EAAM,KAAK,QAASc,GAAS,CAC3BV,EAAS,MAAM,KAAKU,EAAK,EAAE,CACjC,CAAK,EAEDV,EAAS,MAAQ,CAAE,CAEvB,EAEMW,EAAiB,CAACC,EAAOC,IAAS,CACtC,MAAMC,EAAkBd,EAAS,MAAM,UAAWU,GAASA,EAAK,KAAOG,EAAK,EAAE,EAG1ED,GAAS,CAACZ,EAAS,MAAM,SAASa,EAAK,EAAE,GAC3Cb,EAAS,MAAM,KAAKa,EAAK,EAAE,EAIzB,CAACD,GAASZ,EAAS,MAAM,SAASa,EAAK,EAAE,GAC3Cb,EAAS,MAAM,OAAOc,EAAiB,CAAC,CAE5C,EAKMC,EAAyBT,GAAU,CACvC,IAAIU,EAAOV,EAAQ,GACnB,OAAAU,EAAOA,EAAO,GAAM,GAAMA,EACnB,GAAGA,EAAK,QAAQ,CAAC,CAAC,GAC3B,EAKMC,EAAmB,CAACR,EAAKH,IAAU,CAClCV,EAAM,gBACXa,EAAI,eAAgB,EACpBb,EAAM,cAAca,EAAKH,CAAK,EAChC,EAKMY,EAAc,CAACT,EAAKH,IAAU,CAC7BV,EAAM,WACXa,EAAI,eAAgB,EACpBb,EAAM,SAASa,EAAKH,CAAK,EAC3B,EAKMa,EAAqBC,GAAQ,CACjC,GAAKA,EAAI,MACT,MAAO,SAASA,EAAI,KAAK,EAC3B,EAKMC,EAAaC,EAAS,IACnBxB,EAAK,KACb,EAGD,OAAAyB,EAAa,CACX,WAAAF,CACF,CAAC"}