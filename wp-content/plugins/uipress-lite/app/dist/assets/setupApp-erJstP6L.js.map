{"version":3,"file":"setupApp-erJstP6L.js","sources":["../../src/setup/setGlobalProperties.js","../../node_modules/vue-shadow-dom/shadow.mjs","../../src/components/app-view/index.vue","../../src/setup/setupApp.js"],"sourcesContent":["import { config } from \"@/store/app/constants.js\";\n\nexport const setGlobalProperties = (appStore) => {\n  // Get script tag\n  const scriptTag = document.querySelector(\"#uip-app-data\");\n\n  // Bail if no script tag\n  if (!scriptTag) return;\n\n  // Get data attributes\n  const restBase = scriptTag.getAttribute(\"rest-base\");\n  const restNonce = scriptTag.getAttribute(\"rest-nonce\");\n  const cacheKey = scriptTag.getAttribute(\"cache-key\");\n  const templateType = scriptTag.getAttribute(\"template-type\");\n  const templateID = scriptTag.getAttribute(\"template-id\");\n  const pluginBase = scriptTag.getAttribute(\"plugin-base\");\n  const siteID = scriptTag.getAttribute(\"site-id\");\n  const adminUrl = scriptTag.getAttribute(\"admin-url\");\n  const siteURL = scriptTag.getAttribute(\"site-url\");\n  const userID = scriptTag.getAttribute(\"user-id\");\n  const username = scriptTag.getAttribute(\"user-name\");\n  const isAdmin = scriptTag.getAttribute(\"is-admin\");\n  let roles = scriptTag.getAttribute(\"user-roles\");\n\n  roles = JSON.parse(roles);\n\n  // Update store properties\n  appStore.updateState(\"restBase\", restBase);\n  appStore.updateState(\"restNonce\", restNonce);\n  appStore.updateState(\"userRoles\", roles);\n  appStore.updateState(\"cacheKey\", cacheKey);\n  appStore.updateState(\"pluginBase\", pluginBase);\n  appStore.updateState(\"adminUrl\", adminUrl);\n  appStore.updateState(\"siteURL\", siteURL);\n  appStore.updateState(\"userID\", userID);\n  appStore.updateState(\"username\", username);\n  appStore.updateState(\"siteID\", siteID);\n  appStore.updateState(\"isAdmin\", isAdmin == \"1\" ? true : false);\n  appStore.updateState(\"templateType\", config.value.templateType || templateType);\n  appStore.updateState(\"templateID\", config.value.templateId || templateID);\n  appStore.updateState(\"teleportPoint\", \"body\");\n};\n","import { defineComponent, h, ref, computed, reactive, onBeforeMount, onMounted, watch, Teleport } from 'vue';\n\nfunction makeShadow(el, option) {\r\n    return makeShadowRaw(el, el.childNodes, option);\r\n}\r\nfunction makeShadowRaw(rootEl, childNodes, { mode = 'open', delegatesFocus = false } = { mode: 'open' }) {\r\n    try {\r\n        const oldroot = rootEl.shadowRoot;\r\n        if (oldroot != null) {\r\n            console.error('[shadow] Attach shadow multiple times', rootEl, childNodes, oldroot);\r\n            return;\r\n        }\r\n        else {\r\n            const shadow_root = rootEl.attachShadow({ mode, delegatesFocus });\r\n            if (childNodes)\r\n                putDomIntoShadow(shadow_root, childNodes);\r\n            return shadow_root;\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.error('[shadow] make shadow-root failed', rootEl, childNodes);\r\n        console.error(e);\r\n    }\r\n}\r\n// function removeShadow(rootEl: Element): Element {\r\n//     const newroot = rootEl.cloneNode() as Element\r\n//     while (rootEl.hasChildNodes()) {\r\n//         newroot.appendChild(rootEl.firstChild!)\r\n//     }\r\n//     rootEl.parentElement!.replaceChild(newroot, rootEl)\r\n//     console.log('removeShadow', newroot)\r\n//     return newroot\r\n// }\r\nfunction putDomIntoShadow(shadow_root, childNodes) {\r\n    const fragment = document.createDocumentFragment();\r\n    for (const node of childNodes) {\r\n        fragment.appendChild(node);\r\n    }\r\n    shadow_root.appendChild(fragment);\r\n}\r\nconst virtual_root = document.createDocumentFragment();\r\nconst ShadowStyle = defineComponent({\r\n    props: {\r\n        media: String,\r\n        nonce: String,\r\n    },\r\n    setup(props, { slots }) {\r\n        return () => (h(\"style\", { media: props.media, nonce: props.nonce }, slots.default?.()));\r\n    },\r\n});\r\nconst ShadowRoot = withType()(defineComponent({\r\n    props: {\r\n        mode: {\r\n            type: String,\r\n            default: 'open',\r\n        },\r\n        delegatesFocus: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        abstract: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        tag: {\r\n            type: String,\r\n            default: 'div',\r\n        },\r\n        adoptedStyleSheets: {\r\n            type: Array,\r\n        },\r\n    },\r\n    emits: ['error'],\r\n    setup(props, { slots, expose, emit }) {\r\n        const abstract = ref(false);\r\n        const el = ref();\r\n        const teleport_el = ref();\r\n        const shadow_root = ref();\r\n        const teleport_target = computed(() => shadow_root.value ?? virtual_root);\r\n        const ex = reactive({\r\n            shadow_root,\r\n        });\r\n        expose(ex);\r\n        onBeforeMount(() => {\r\n            abstract.value = props.abstract;\r\n        });\r\n        onMounted(() => {\r\n            try {\r\n                if (abstract.value) {\r\n                    if (teleport_el.value.parentElement.shadowRoot) {\r\n                        shadow_root.value = teleport_el.value.parentElement.shadowRoot;\r\n                    }\r\n                    else {\r\n                        shadow_root.value = makeShadowRaw(teleport_el.value.parentElement, void 0, {\r\n                            mode: props.mode,\r\n                            delegatesFocus: props.delegatesFocus,\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    shadow_root.value = makeShadowRaw(el.value, void 0, { mode: props.mode, delegatesFocus: props.delegatesFocus });\r\n                }\r\n                shadow_root.value?.styleSheets;\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n                emit('error', e);\r\n            }\r\n        });\r\n        watch([shadow_root, () => props.adoptedStyleSheets], ([shadow_root, adoptedStyleSheets]) => {\r\n            if (!shadow_root || !adoptedStyleSheets)\r\n                return;\r\n            try {\r\n                ;\r\n                shadow_root.adoptedStyleSheets = adoptedStyleSheets;\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n                emit('error', e);\r\n            }\r\n        });\r\n        return () => {\r\n            const child_part = (h(Teleport, { ref: teleport_el, to: teleport_target.value }, [slots.default?.()]));\r\n            if (abstract.value)\r\n                return child_part;\r\n            return h(props.tag, { ref: el }, child_part);\r\n        };\r\n    },\r\n    install,\r\n    Style: ShadowStyle,\r\n}));\r\nfunction withType() {\r\n    return obj => obj;\r\n}\r\nfunction install(app) {\r\n    app.component('shadow-root', ShadowRoot);\r\n    app.directive('shadow', {\r\n        beforeMount(el) {\r\n            console.warn('[VueShadowDom] Deprecated v-shadow directive, use <shadow-root> component');\r\n            makeShadow(el);\r\n        },\r\n    });\r\n}\r\nvar shadow = { ShadowRoot, ShadowStyle, shadow_root: ShadowRoot, shadow_style: ShadowStyle, install };\n\nexport { ShadowRoot, ShadowStyle, shadow as default, install, makeShadow, makeShadowRaw, ShadowRoot as shadow_root, ShadowStyle as shadow_style };\n//# sourceMappingURL=shadow.mjs.map\n","<script setup>\nimport Notify from \"@/components/notify/index.vue\";\nimport { nextTick, ref, computed, onMounted, onBeforeUnmount, provide } from \"vue\";\nimport { lmnFetch } from \"@/assets/js/functions/lmnFetch.js\";\nimport { get_block_option, isObject, hasNestedPath, uipParseJson } from \"@/utility/functions.js\";\nimport { ShadowRoot } from \"vue-shadow-dom\";\nimport { uipApp } from \"@/store/app/constants.js\";\nimport { useAppStore } from \"@/store/app/app.js\";\n\n// Component registration\nconst components = { Notify, ShadowRoot };\n\n// State\nconst template = ref({\n  display: \"prod\",\n  notifications: [],\n  settings: null,\n  content: null,\n  globalSettings: null,\n  updated: null,\n  id: null,\n});\nconst appStore = useAppStore();\nconst adoptedStyleSheets = ref(new CSSStyleSheet());\nconst isLoading = ref(false);\nconst updateAvailable = ref(false);\nconst windowWidth = ref(window.innerWidth);\nconst shadowMount = ref(null);\nconst teleportPoint = ref(null);\n\n// Provide template to child components\nprovide(\"uiTemplate\", template.value);\n\n// Computed properties\nconst returnThemeStyles = computed(() => {\n  return isObject(uipApp.data.themeStyles) ? uipApp.data.themeStyles : {};\n});\n\nconst returnTemplateJS = computed(() => {\n  if (typeof template.value?.globalSettings?.options === \"undefined\") return;\n  return hasNestedPath(template.value, \"globalSettings\", \"options\", \"advanced\", \"js\");\n});\n\nconst returnTemplateCSS = computed(() => {\n  if (typeof template.value?.globalSettings?.options === \"undefined\") return;\n  return hasNestedPath(template.value, \"globalSettings\", \"options\", \"advanced\", \"css\");\n});\n\nconst returnResponsiveClass = computed(() => {\n  if (windowWidth.value >= 990) return \"uip-desktop-view\";\n  if (windowWidth.value >= 699) return \"uip-tablet-view\";\n  return \"uip-phone-view\";\n});\n\n/**\n * Injects styles into shadow root\n */\nconst setStyles = () => {\n  try {\n    let appStyleNode = document.querySelector(\"#uip-app-css\");\n    if (!appStyleNode) {\n      appStyleNode = manuallyAddStyleSheet();\n      // Wait for stylesheet to load\n      appStyleNode.onload = () => {\n        const appStyles = appStyleNode.sheet;\n        for (const rule of appStyles.cssRules) {\n          adoptedStyleSheets.value.insertRule(rule.cssText);\n        }\n      };\n    } else {\n      const appStyles = appStyleNode.sheet;\n      for (const rule of appStyles.cssRules) {\n        adoptedStyleSheets.value.insertRule(rule.cssText);\n      }\n    }\n  } catch (err) {\n    destroyApp();\n  }\n};\n\nconst manuallyAddStyleSheet = () => {\n  var link = document.createElement(\"link\");\n  link.rel = \"stylesheet\";\n  link.href = `${appStore.state.siteURL}/wp-content/plugins/uipress-lite/assets/css/uip-app.css`;\n  document.head.appendChild(link);\n\n  return link;\n};\nconst initiateApp = async () => {\n  isLoading.value = true;\n\n  //await setStyles();\n  await fetchTemplate();\n\n  nextTick(() => {\n    isLoading.value = false;\n  });\n};\n\nconst fetchTemplate = async () => {\n  const templateType = appStore.state.templateType;\n  const templateID = appStore.state.templateID;\n\n  if (templateType === \"ui-template\") {\n    const cachedTemplate = getCachedTemplate();\n\n    if (cachedTemplate === \"no_templates\") return destroyApp();\n    if (cachedTemplate) return updateActiveTemplate(cachedTemplate);\n\n    await fetchUserInterface();\n  }\n\n  if (templateType === \"ui-front-template\") {\n    await fetchUserInterface();\n  }\n\n  if (templateType === \"ui-admin-page\" && templateID) {\n    await fetchAdminPage();\n  }\n};\n\nconst fetchAdminPage = async () => {\n  const templateID = appStore.state.templateID;\n  const args = {\n    endpoint: `wp/v2/uip-ui-template/${templateID}`,\n    params: { per_page: 1, status: \"publish\" },\n  };\n\n  const response = await lmnFetch(args);\n\n  if (!response) {\n    destroyApp();\n    return;\n  }\n\n  const templateData = response.data;\n\n  if (!templateData) return;\n  updateActiveTemplate(templateData);\n};\n\nconst fetchUserInterface = async () => {\n  const args = {\n    endpoint: \"wp/v2/uip-ui-template\",\n    params: { per_page: 100, status: \"publish\" },\n  };\n\n  const response = await lmnFetch(args);\n\n  if (!response) {\n    destroyApp();\n    return;\n  }\n\n  const templates = response.data;\n\n  if (!templates.length) {\n    cacheNoActiveTemplate();\n  } else {\n    checkForActiveTemplate(templates);\n  }\n};\n\nconst checkForActiveTemplate = (templates) => {\n  const templateType = appStore.state.templateType;\n  const userRoles = appStore.state.userRoles;\n\n  for (let template of templates) {\n    // Bail if incorrect type\n    if (template.uipress.type !== templateType) continue;\n\n    // Ensures ui templates have a page content available\n    if (templateType == \"ui-template\") {\n      const templateString = JSON.stringify(template.uipress.template);\n      if (!templateString.includes(\"uip-content\") || !templateString.includes(\"uip-admin-menu-new\")) continue;\n    }\n\n    // Set up roles and users\n    const includesRoles = template.uipress.forRoles || [];\n    const includesUsers = template.uipress.forUsers || [];\n    const excludedRoles = template.uipress.excludesRoles || [];\n    const excludedUsers = template.uipress.excludesUsers || [];\n\n    // Apply to everyone\n    const applyToEveryone = template.uipress?.settings?.applyToEveryone;\n\n    // Check if user is matched\n    const matchedUser = includesUsers.find((item) => item == appStore.state.userID);\n    // Check if user role matches\n    let matchedRole = false;\n    for (let role of userRoles) {\n      const match = includesRoles.find((item) => item == role);\n      if (match) {\n        matchedRole = true;\n        break;\n      }\n    }\n\n    // Check if user is excluded\n    const matchedExcludedUser = excludedUsers.find((item) => item == appStore.state.userID);\n    // Check if user role matches\n    let matchedExcludedRole = false;\n    for (let role of userRoles) {\n      const match = excludedRoles.find((item) => item == role);\n      if (match) {\n        matchedExcludedRole = true;\n        break;\n      }\n    }\n\n    if (applyToEveryone === \"uiptrue\") {\n      // Matched template\n      updateActiveTemplate(template);\n      cacheActiveTemplate(template);\n      return;\n    }\n\n    // User is either matched by role or user id and not excluded by role or user id\n    else if ((matchedUser || matchedRole) && !matchedExcludedUser && !matchedExcludedRole) {\n      // Matched template\n      updateActiveTemplate(template);\n      cacheActiveTemplate(template);\n      return;\n    }\n  }\n\n  cacheNoActiveTemplate();\n  destroyApp();\n};\n\nconst getCachedTemplate = () => {\n  try {\n    const cachedData = localStorage.getItem(returnCacheKey.value);\n    if (!cachedData) return null;\n\n    const { template, cacheKey } = JSON.parse(cachedData);\n\n    if (appStore.state.cacheKey == cacheKey) {\n      return template;\n    }\n\n    localStorage.removeItem(returnCacheKey.value);\n    return null;\n  } catch (error) {\n    console.error(\"Failed to retrieve cached template:\", error);\n    return null;\n  }\n};\n\nconst cacheActiveTemplate = (templateData) => {\n  // Don't cache front templates\n  const templateType = appStore.state.templateType;\n  if (templateType === \"ui-front-template\") {\n    return;\n  }\n\n  const cacheData = {\n    template: templateData,\n    cacheKey: appStore.state.cacheKey,\n  };\n\n  try {\n    localStorage.setItem(returnCacheKey.value, JSON.stringify(cacheData));\n    return true;\n  } catch (error) {\n    console.error(\"Failed to cache template:\", error);\n    return false;\n  }\n};\n\nconst cacheNoActiveTemplate = () => {\n  // Don't cache front templates\n  const templateType = appStore.state.templateType;\n  if (templateType === \"ui-front-template\") {\n    return;\n  }\n\n  const cacheData = {\n    template: \"no_templates\",\n    no_templates: true,\n    cacheKey: appStore.state.cacheKey,\n  };\n\n  try {\n    localStorage.setItem(returnCacheKey.value, JSON.stringify(cacheData));\n    return true;\n  } catch (error) {\n    console.error(\"Failed to cache template:\", error);\n    return false;\n  }\n};\n\nconst updateActiveTemplate = (templateData) => {\n  const templateType = appStore.state.templateType;\n\n  if (templateType === \"ui-template\") {\n    document.body.style.opacity = 1;\n    document.documentElement.style.overflow = \"hidden\";\n  }\n\n  appStore.updateState(\"teleportPoint\", teleportPoint.value);\n\n  if (templateType != \"ui-admin-page\") {\n    const adminBarStyles = document.querySelector(\"#uipress-admin-bar-css\");\n    if (adminBarStyles) adminBarStyles.remove();\n  }\n\n  template.value.settings = uipParseJson(JSON.stringify(templateData.uipress.settings));\n  template.value.content = uipParseJson(JSON.stringify(templateData.uipress.template));\n  template.value.globalSettings = uipParseJson(JSON.stringify(templateData.uipress.settings));\n  template.value.id = templateData.id;\n\n  nextTick(() => {\n    isLoading.value = false;\n  });\n};\n\nconst destroyApp = () => {\n  document.body.style.opacity = 1;\n  document.documentElement.style.overflow = \"auto\";\n  document.documentElement.removeAttribute(\"uip-core-app\");\n  document.documentElement.removeAttribute(\"uip-admin-theme\");\n  const appInterface = document.querySelector(\"#uip-ui-interface\");\n  if (appInterface) appInterface.remove();\n\n  const appFrontInterface = document.querySelector(\"#uip-frontend-toolbar\");\n  if (appFrontInterface) appFrontInterface.remove();\n\n  const appFrontStyles = document.querySelector(\"#uip-front-end-hider\");\n  if (appFrontStyles) appFrontStyles.remove();\n};\n\nconst handleWindowResize = () => {\n  windowWidth.value = window.innerWidth;\n};\n\nconst toggleDarkMode = () => {\n  const state = uipApp.data.userPrefs.darkTheme;\n  uipApp.data.userPrefs.darkTheme = !state;\n\n  const theme = state ? \"light\" : \"dark\";\n  document.documentElement.setAttribute(\"data-theme\", theme);\n\n  const frames = document.querySelectorAll(\"iframe\");\n  if (!frames) return;\n\n  for (const iframe of frames) {\n    const head = iframe.contentWindow.document.documentElement;\n    if (!head) continue;\n    head.setAttribute(\"data-theme\", theme);\n  }\n\n  saveUserPreference(\"darkTheme\", !state, false);\n};\n\nconst getNotifications = () => {\n  const notifications = document.querySelectorAll(\".notice:not(#message):not(.inline):not(.update-message),.wp-analytify-notification\");\n\n  if (!notifications) return;\n\n  template.value.notifications = [];\n\n  let notiActive = false;\n  const stringTemplate = JSON.stringify(template.value.content);\n  if (stringTemplate.includes(\"site-notifications\")) notiActive = true;\n\n  for (const noti of notifications) {\n    template.value.notifications.push(noti.outerHTML.replace(\"uip-framed-page=1\", \"\"));\n    if (notiActive) {\n      noti.setAttribute(\"style\", \"display:none !important; visibility: hidden !important; opacity: 0 !important;\");\n    }\n  }\n\n  uipApp.data.dynamicOptions.notificationCount.value = template.value.notifications.length;\n};\n\nconst returnCacheKey = computed(() => {\n  return `uipress_templates_${appStore.state.userID}_${appStore.state.siteID}`;\n});\n\n// Lifecycle hooks\nonMounted(() => {\n  window.addEventListener(\"resize\", handleWindowResize);\n  getNotifications();\n  initiateApp();\n});\n\nonBeforeUnmount(() => {\n  window.removeEventListener(\"resize\", handleWindowResize);\n  document.removeEventListener(\"uipress/app/darkmode/toggle\", toggleDarkMode);\n});\n</script>\n\n<template>\n  <div is=\"div\" tag=\"div\" :adopted-style-sheets=\"[adoptedStyleSheets]\" ref=\"shadowMount\" id=\"uipress-shadow-root\" class=\"uip-w-100p uipress-normalize\">\n    <div\n      class=\"uip-h-100p uip-background-default uip-user-frame uip-body-font uip-teleport uip-flex overflow-hidden\"\n      :class=\"appStore.state.templateType === 'ui-template' ? 'uip-w-vw' : 'uip-w-100p'\"\n    >\n      <Notify />\n\n      <component is=\"style\" v-if=\"!isLoading\">#wpadminbar{opacity:1 !important}</component>\n\n      <component is=\"style\" scoped id=\"uip-theme-styles\">\n        html[data-theme='light'], html {\n        <template v-for=\"(item, index) in returnThemeStyles\">\n          <template v-if=\"item.value && item.value != 'uipblank'\">{{ index }}:{{ item.value }};</template>\n        </template>\n\n        } html[data-theme=\"dark\"], .uip-dark-mode, #uip-admin-page .uip-dark-mode, #uip-ui-interface .uip-dark-mode {\n        <template v-for=\"(item, index) in returnThemeStyles\">\n          <template v-if=\"item.darkValue && item.darkValue != 'uipblank'\"> {{ index }}:{{ item.darkValue }} !important;</template>\n        </template>\n        }\n        {{ returnTemplateCSS }}\n      </component>\n\n      <component is=\"style\"> .v-enter-active, .v-leave-active {transition: opacity 0.6s ease;} .v-enter-from, .v-leave-to {opacity: 0;} </component>\n\n      <!-- isLoading -->\n      <div v-if=\"isLoading\" class=\"\" style=\"text-align: center; padding: 60px; position: absolute; top: 0; bottom: 0; left: 0; right: 0\">Loading...</div>\n\n      <!-- Not isLoading-->\n      <uip-content-area :content=\"template.content\" :class=\"returnResponsiveClass\" v-else-if=\"!isLoading\" />\n\n      <!--Import plugins -->\n      <template v-for=\"plugin in uipGlobalPlugins\">\n        <component :is=\"plugin\" />\n      </template>\n      <!-- end plugin import -->\n\n      <div ref=\"teleportPoint\"></div>\n    </div>\n  </div>\n</template>\n","const { __ } = wp.i18n;\nimport { createApp } from \"vue\";\nimport { registerGlobalComponents } from \"@/setup/registerGlobalComponents.js\";\nimport { buildDataStore } from \"@/setup/buildDataStore.js\";\nimport { registerGlobalProperties } from \"@/setup/registerGlobalProperties.js\";\nimport { registerDynamicBlocks } from \"@/setup/registerDynamicBlocks.js\";\nimport { registerDynamicPlugins } from \"@/setup/registerDynamicPlugins.js\";\nimport { registerDynamicComponents } from \"@/setup/registerDynamicComponents.js\";\nimport { setGlobalProperties } from \"@/setup/setGlobalProperties.js\";\nimport { createPinia } from \"pinia\";\nimport { useAppStore } from \"@/store/app/app.js\";\n\n// Import comps\nimport MainApp from \"@/components/app-view/index.vue\";\n\n/**\n * builds a uip app\n *\n * @param {string} selectorID\n */\nexport const setupApp = (mountPoint) => {\n  /* Create vue app */\n  const app = createApp(MainApp);\n\n  // Use pinia\n  const pinia = createPinia();\n  app.use(pinia);\n\n  const appStore = useAppStore();\n  setGlobalProperties(appStore);\n\n  /* Import Core components */\n  registerGlobalComponents(app);\n  registerGlobalProperties(app);\n  buildDataStore(app, \"prod\");\n  registerDynamicBlocks(app);\n  registerDynamicPlugins(app);\n  registerDynamicComponents(app);\n\n  app.mount(mountPoint);\n};\n"],"names":["setGlobalProperties","appStore","scriptTag","restBase","restNonce","cacheKey","templateType","templateID","pluginBase","siteID","adminUrl","siteURL","userID","username","isAdmin","roles","config","template","ref","useAppStore","adoptedStyleSheets","isLoading","windowWidth","shadowMount","teleportPoint","provide","returnThemeStyles","computed","isObject","uipApp","_b","_a","hasNestedPath","returnTemplateCSS","returnResponsiveClass","initiateApp","fetchTemplate","nextTick","cachedTemplate","getCachedTemplate","destroyApp","updateActiveTemplate","fetchUserInterface","fetchAdminPage","args","response","lmnFetch","templateData","templates","checkForActiveTemplate","cacheNoActiveTemplate","userRoles","templateString","includesRoles","includesUsers","excludedRoles","excludedUsers","applyToEveryone","matchedUser","item","matchedRole","role","matchedExcludedUser","matchedExcludedRole","cacheActiveTemplate","cachedData","returnCacheKey","error","cacheData","adminBarStyles","uipParseJson","appInterface","appFrontInterface","appFrontStyles","handleWindowResize","toggleDarkMode","state","theme","frames","iframe","head","getNotifications","notifications","notiActive","noti","onMounted","onBeforeUnmount","setupApp","mountPoint","app","createApp","MainApp","pinia","createPinia","registerGlobalComponents","registerGlobalProperties","buildDataStore","registerDynamicBlocks","registerDynamicPlugins","registerDynamicComponents"],"mappings":"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","x_google_ignoreList":[1]}